\input texinfo   @c -*-texinfo-*-
@c
@c
@setfilename ecb.info

@settitle ECB - the Emacs Code Browser

@c If we want only one index for concepts, functions and variables
@c @syncodeindex vr cp
@c @syncodeindex fn cp

@ifinfo
@format
START-INFO-DIR-ENTRY
* ECB: (ecb).           Emacs Code Browser
END-INFO-DIR-ENTRY
@end format
@end ifinfo

@titlepage
@sp 10
@center @titlefont{ECB}
@vskip 0pt plus 1 fill
Copyright @copyright{} 2000, 2001, 2002 Jesper Nordenberg
@end titlepage

@node Top, Install, (dir), (dir)
@comment  node-name,  next,  previous,  up

ECB (Emacs Code Browser) is a source code browser for Emacs. It is a
global minor-mode which displays a couple of windows that can be used
to browse directories, files and methods. It supports method parsing
for Java, C, C++, Elisp and some more.

The latest version of ECB can always be found at the URL:
@url{http://home.swipnet.se/mayhem/ecb.html}

To send bug reports, or participate in discussions about ECB, use the
mailing list @email{ecb-list@@lists.sourceforge.net} via the URL:
@url{http://lists.sourceforge.net/lists/listinfo/ecb-list}

@menu
* Install::                     Installing ECB.
* Overview::                    Introduce basic concepts
* Activation and Deactivation:: How to start and end ECB
* Usage of ECB::                How to use ECB
* Customizing::                 How to customize ECB
* Submitting problem report::   What to do when problems occur
* Upgrading::                   Upgrading ECB from within Emacs
* Tips and tricks::             Useful hints and tips
* Elisp programming::           Entry points for elisp programmers
* Conflicts::                   Known Conflicts with other packages
* Function Index::              Index for functions
* Variable Index::              Index for variables and options
* Concept Index::               Index for concepts and terms
@comment * Index::
@end menu

@node Install, Overview, Top, Top
@chapter Installation

@enumerate

@item
Unpack the ECB archive.

@item
Read the file @file{README} in the ECB-directory and install the
required semantic- and eieio-version.

@item
Add the new ECB-directory to your @code{load-path} variable.

You MUST add the ECB-install-directory to the @code{load-path} either
by changing the @code{load-path} variable directly in your
@file{.emacs} or @file{site-lisp/site-start.el} or by working with
a file @file{subdirs.el}.

ATTENTION:
ECB is NOT properly installed if it's directory is not added to
@code{load-path} and for example just loaded by

@example
(load-file "/path/to/ecb/ecb.el")
@end example

Do not do this!

@item
Add to your @file{.emacs} or @file{site-lisp/site-start.el} the line:

@example
(require 'ecb)
@end example
@end enumerate

@noindent
Optional steps:

@enumerate 5
@item Restart Emacs.
@item Call @code{ecb-byte-compile}.
This byte compiles ECB. You can safely ignore all messages.
(You can also bytecompile ECB from the command-line either by using
the @file{Makefile} or by using the batch-file @file{make.bat}. Just
read the comments in that file you choose.)

@item Install the supplied @file{ecb.info}
The ECB distribution contains a file @file{ecb.info} which is the
online-help of ECB in Info-format. You can install this online help so
it's available in the Top-directory of Info. There are two ways to do
this:

@itemize @minus
@item
Use the command ``install-info'' if available on your system
(recommended).
@item
Copy the file @file{ecb.info} into the info-directory of Emacs and
modify the file @file{dir} manually.
@end itemize

It doesn't matter if you do not execute this step because the online
help of ECB is always available though, see @code{ecb-show-help}
(@pxref{Interactive ECB commands}).

@end enumerate

@node Overview, Activation and Deactivation , Install, Top
@chapter Overview

@cindex tree-buffer
ECB is a global minor-mode which offers a few @dfn{ECB-windows} for
browsing your sources comfortable with the mouse and the keyboard.
These ``special'' windows are also called @dfn{tree-buffer} in this
manual. There are currently three different types of
ECB-windows/tree-buffers:

@menu
* ECB Directories::
* ECB Sources::
* ECB Methods::
@end menu

In addition to these ECB-windows you have always one or two
@dfn{edit-windows} (@pxref{Working with the edit-window}) in the
ECB-frame and (if you want) at the bottom a @dfn{compilation-window},
where all the output of Emacs-compilation (compile, grep etc.) is
shown (@pxref{Temp- and compilation-buffers}).

@node ECB Directories, ECB Sources, Overview, Overview
@section ECB Directories

@cindex Directories
@itemize @bullet
@item
Select directories (and - if enabled - source files) in the
@dfn{ECB-Directories} buffer by clicking a mouse button on the directory
name or by hitting RETURN when the cursor is placed on the item line,
@xref{Usage of ECB}.

@item
Directory names with a ``[+]'' symbol after (or before) them can be
expanded/collapsed by clicking on the symbol, pressing the TAB key
when the cursor is placed on the package line or clicking a mouse
button on the item, @xref{Usage of ECB}.

@item
Right clicking on an item will open a popup menu where different
operations on the item under the mouse cursor can be performed.

@item
Pressing F1 in the ECB-directories buffer will offer adding a new
source-path. Pressing F2 will open the ECB customization group
(@pxref{Customizing}) in the edit window. F3 shows the online help in
the edit-window.
@end itemize

@node ECB Sources, ECB Methods, ECB Directories, Overview
@section ECB Sources

@cindex Sources
@cindex History
@itemize @bullet
@item
Source files can be selected by clicking a mouse button
(@pxref{Working with the mouse}) or hitting RETURN (@pxref{Working
with the keyboard}) on the source row in the @dfn{ECB-Sources} or
@dfn{ECB- History} windows.

IMPORTANT: If you hold down the SHIFT-key while clicking with the
primary mouse button (@pxref{Working with the mouse}) or RETURN
(@pxref{Working with the keyboard}) on a source row in the ECB-Sources
or ECB-History windows then the source will not be displayed in the
edit-window but it will be scanned in the background and all its
contents (e.g. methods and variables) are listed in the @dfn{ECB
Methods} window (@pxref{ECB Methods}. So you can get an overlook over
the source without changing the buffer in the edit-window.

@item
Clicking on the source file with the secondary mouse button or
C-RETURN (@pxref{Usage of ECB}) will open the source file in
the other edit window.

@item
Right clicking on a source file will open a popup menu where different
operation on the item under the mouse cursor can be performed.
@end itemize

@node ECB Methods, , ECB Sources, Overview
@section ECB Methods

@cindex Methods
@cindex Methods
@itemize @bullet
@item
The @dfn{ECB-Methods} buffer contains the methods (and variables, if you
want) in the selected source file. When a method/variable is selected
with the primary mouse button  or RETURN (@pxref{Usage of ECB}) the
edit buffer will jump to the method/variable.

@item
Clicking on a method/variable with the secondary mouse button or C-RETURN
(@pxref{Usage of ECB}) will jump to the method in the other edit window.
@end itemize

@node Activation and Deactivation, Usage of ECB, Overview, Top
@chapter Activation and Deactivation

Call @kbd{M-x ecb-activate} and @kbd{M-x ecb-deactivate} to activate or
deactivate ECB. If you want ECB started in a new frame see the option
@code{ecb-new-ecb-frame} (default is nil). @code{ecb-activate} always
raises and selects the ECB-frame even if ECB is already started.

Because ECB is a global minor-mode it can also be
(de)activated/toggled by @kbd{M-x ecb-minor-mode}.

There are three options for auto. (de)activation ECB after Emacs-start
and also major-mode based. See @code{ecb-auto-activate},
@code{ecb-major-modes-activate} and @code{ecb-major-modes-deactivate}.


@node Usage of ECB, Customizing, Activation and Deactivation, Top
@chapter Usage of ECB

This chapter describes in a detailed manner all aspects of using the
Emacs Code Browser.

@menu
* Working with the mouse::
* Working with the keyboard::
* Working with the edit-window::
* Temp- and compilation-buffers::
* Rebuilding the Methods buffer::
* Changing the ECB-layout::
* Redrawing the ECB-layout::
* Hiding/Showing the ECB windows::
* Interactive ECB commands::
@end menu

@node Working with the mouse, Working with the keyboard, Usage of ECB, Usage of ECB
@section Working with the mouse in the ECB-windows

@cindex primary button
@cindex secondary button
@cindex mouse button
Normally you get best usage if you use ECB with a mouse. ECB
distinguishes between a @dfn{primary} and a @dfn{secondary}
mouse-button:

A click with the primary button causes the main effect in each ECB-buffer:

@itemize @minus
@item ECB Directories:
Expanding/collapsing nodes and displaying files in the ECB-Sources
buffer.

@item ECB sources/history:
Opening the file in that edit-window specified by the option
@code{ecb-primary-mouse-jump-destination}.

@item ECB Methods:
Jumping to the method in that edit-window specified by the option
@code{ecb-primary-mouse-jump-destination}.
@end itemize

@cindex SHIFT-click
Per default the complete node-name of an item in a tree-buffer is displayed in
the echo-area if the mouse moves over it, regardless if the related window is
the active one or not. You can get the same effect if you click with the
primary mouse-button onto a node while SHIFT is held. In general: Via
@code{ecb-show-node-info-in-minibuffer} you can specify in a detailled manner for
every ECB tree-buffer when and which node-info should be displayed in the
minibuffer.

IMPORTANT: Doing this SHIFT-click in the ECB-Sources or ECB-History
windows does not only show the node in the echo-area but it also opens the
clicked source only in the background and shows all its methods/variables in
ECB-Methods; the buffer of the edit-window is not changed! This is very
useful to get only an overlook for a certain source.

The secondary mouse-button is for opening (jumping to) the file in the other
window (see the documentation @code{ecb-primary-mouse-jump-destination}).

With the option @code{ecb-primary-secondary-mouse-buttons} the following
combinations of primary and secondary mouse-buttons are possible:

@itemize @minus
@item
primary: mouse-2, secondary: C-mouse-2 (means mouse-2 while CTRL-key
is pressed). This is the default setting.
@item
primary: mouse-1, secondary: C-mouse-1
@item
primary: mouse-1, secondary: mouse-2
@end itemize

If you change this during ECB is activated you must deactivate and activate
ECB again to take effect

In each ECB-buffer mouse-3 (= right button) opens a special context popup-menu
for the clicked item where you can choose several senseful actions.


@node Working with the keyboard, Working with the edit-window, Working with the mouse, Usage of ECB
@section Working with the keyboard in the ECB-windows

ECB offers the @code{ecb-mode-map} which binds the most important
functions of ECB to keys so you can easily use ECB without a mouse.

IMPORTANT: Do not modify @code{ecb-mode-map} directly! The option
@code{ecb-key-map} defines all ECB keybindings, including a common
prefixkey (This is by default @kbd{C-c .}). If there are conflicts with
other minor-modes or packages you can define very easy another prefix.
Please read carefully the description of @code{ecb-key-map}!

@menu
* Navigation::
* Incremental search::
@end menu

@node Navigation, Incremental search, Working with the keyboard, Working with the keyboard
@subsection Navigation

@cindex RETURN key
@cindex TAB key
@cindex expanding
@cindex collapsing
In the ECB-buffers RETURN and TAB are the most important keys:

@itemize @bullet
@item
RETURN does the same as the primary button and C-RETURN does the same
as the secondary button. The terms primary and secondary are explained
in @ref{Working with the mouse}. S-RETURN is the same as the
SHIFT-click (@pxref{ECB Sources}). See also the option
@code{ecb-tree-RET-selects-edit-window} and the function
@code{ecb-toggle-RET-selects-edit-window} which is bound to @kbd{C-t}
in each tree-buffer of ECB!

@item
TAB always expands or collapses expandable nodes.
@end itemize

The RETURN and TAB keys can not be (re)defined with @code{ecb-key-map}!

If you set @code{ecb-tree-navigation-by-arrow} to not nil then the left- and
right-arrow keys work in the ECB tree-window in the following smart way if
onto an expandable node:

@itemize @bullet
@item
Left-arrow: If node is expanded then it will be collapsed otherwise
point jumps to the next ``higher'' node in the hierarchical tree (higher
means the next higher level or - if no higher level available - the
next higher node on the same level).

@item
Right-arrow: If node is not expanded then it will be expanded.
@end itemize

Onto a not expandable node the horizontal arrow-keys go one character in the
senseful correct direction.


@node Incremental search, , Navigation, Working with the keyboard
@subsection Incremental search for a node in current tree-buffer

@cindex Incremental search
Each displayable key (e.g. all keys normally bound to @code{self-insert-command})
is appended to the current seach-pattern. The tree-buffer tries to jump to the
first node which matching the current search-pattern either as substring or as
prefix (see below). If no match is found then nothing is done. There are some
special keys:

@itemize @bullet
@item @kbd{backspace} and @kbd{delete}:
Delete the last character from the search-pattern.

@item @kbd{home}:
Delete the complete search-pattern

@item @kbd{end}:
Expand either to a complete node if current search-pattern is already
unique or expands to the greates common substring or prefix of the
nodes. If there are at least two nodes with the same greatest
common-prefix than every hit of @kbd{end} jumps to the next node with this
common prefix.
@end itemize

For better overlooking the current search-pattern is shown in the echo area.
After selecting a node with RET the search-pattern is cleared out. With
@code{ecb-tree-incremental-search} you can specify if the current search-pattern
must be a real prefix of the node (default) or if any substring is matched.

For faster and easier finding the right node in a ecb-window thi incremental
search ignores the following non interesting stuff:

@itemize @minus
@item any leading spaces
@item expand/collapse-buttons: [+] resp. [-]
@item protection-signs (+, -, #) in the method-window if uml-notation is used
@item variables types or returntypes in front of variable- or method-names.
@item const specifier for variables
@end itemize

This means: Just type in the prefix (resp. a substring) of a class-,
variable-, method-, directory- or filename and ECB will bring you as
fast as possible to the node you want. Incremental node-search uses
the value of @code{case-fold-search}.

Tip: The @code{ecb-minor-mode} offers you in the @code{ecb-mode-map}
(customizable via @code{ecb-key-map}) some keys for selecting every window
of the ecb-frame. This makes window-selection a child압 play. For
example you can jump into the method-window by hitting @kbd{C-c . m}.


@node Working with the edit-window, Temp- and compilation-buffers, Working with the keyboard, Usage of ECB
@section Working with the edit-window

@cindex edit-window
ECB offers you all what you need to work with the edit-window as if
the edit-window would be the only window of the ECB-frame.

@cindex Adviced functions
ECB offers you to advice the following functions so they work best with ECB:

@itemize @minus
@item @code{other-window}
@item @code{delete-window}
@item @code{delete-other-windows}
@item @code{split-window-horizontally}
@item @code{split-window-vertically}
@item @code{switch-to-buffer}
@item @code{switch-to-buffer-other-window}
@item @code{other-window-for-scrolling}
@end itemize

The behavior of the adviced functions is:

@itemize @bullet
@item
All these adviced functions behaves exactly like their corresponding
original functons but they always act as if the edit-window(s) of ECB
would be the only window(s) of the ECB-frame. So the edit-window(s) of
ECB seems to be a normal Emacs-frame to the user.

@item
If called in a not edit-window of ECB all these function jumps first
to the (first) edit-window, so you can never destroy the ECB-window
layout unintentionally.

@item
If called in another frame than the ECB-frame these functions behave
exactly like the not adviced original versions!
@end itemize

ATTENTION: If you want to work within the edit-window with splitting
and unsplitting the edit-window(s) it is highly recommended to use the
adviced-functions of ECB instead of the original Emacs-functions (see
above). Per default ECB does advice all of the functions mentioned
above but with the option @code{ecb-advice-window-functions} you can
customizes which functions should be adviced by ECB. Please read
carefully the documentation of this option!


@node Temp- and compilation-buffers, Rebuilding the Methods buffer, Working with the edit-window, Usage of ECB
@section Temp- and compilation-buffers display in ECB

@cindex temporary buffers
@cindex help buffers
@cindex compilation buffers
@cindex grep buffers
If you call any help in Emacs, e.g. by calling @code{describe-function}, or
if you do a completion in the minibuffer, then Emacs displays the
result-buffer in another window. This behavior you have also in ECB.
If the edit-window is already splitted then the temp-buffer is
displayed in the ``other'' edit-window otherwise the edit-window will be
splitted first. The variables @code{temp-buffer-max-height} and
@code{temp-buffer-resize-mode} work also correctly with ECB.

Same for all compilation output-buffers (e.g. after a @code{compile} or
@code{grep}) and the variable @code{compilation-window-height}.

This is default behavior of ECB. But there is also another way to
display such buffers:

@itemize @bullet
@item
With the option @code{ecb-compile-window-height} you can define if the ECB
layout should contain per default a compilation-window at the bottom
(and if yes the height of it). If yes ECB displays all output of
compilation-mode (compile, grep etc.) in this special window. Same for
displaying help-buffers or similar stuff.

@item
With the option @code{ecb-compile-window-temporally-enlarge} you can allow
Emacs to enlarge temporally the ECB-compile-window in some situations.
Please read the comment of this option. See also the description of
the function @code{ecb-toggle-enlarged-compilation-window}.
@end itemize

But because ECB works best without such a durable compilation-window
you should read the documentation of these two options carefully!

@node Rebuilding the Methods buffer, Changing the ECB-layout, Temp- and compilation-buffers, Usage of ECB
@section Rebuilding the ECB-Methods buffer

In almost all cases there is NO need to manually rebuild the
method-buffer, because it is always done automatically if necessary.
But nevertheless there exist a few rare scenarios where a complete
manual rebuild can be necessary. Here is one example:

Depending on the semantic-version: If an elisp-file is parsed which
contains a defun X in the middle where the closing ) is missing, then
semantic parses only until this defun X is reached and you will get an
incomplete ECB-method buffer. In such a case you must complete the
defun X and then completely reparse the elisp-file and rebuild the ECB
method buffer!

A complete manually rebuild is done by @code{ecb-rebuild-methods-buffer}.

@node Changing the ECB-layout, Redrawing the ECB-layout, Rebuilding the Methods buffer, Usage of ECB
@section Changing and customizing the ECB-layout

@cindex layout
ECB offers several predefined layouts. To see which layouts are
available and choose an appropriate one just customize the option
@code{ecb-layout-nr}. The docstring of this option explains how to see
the different available layouts.

If you want to switch fast between some layouts see the option
@code{ecb-toggle-layout-sequence} and the command
@code{ecb-toggle-layout} (@pxref{Simulating speedbar})

In addition to the general layout you can specify if the layout should
contain a durable compilation-window at the bottom of the frame, see
@code{ecb-compile-window-height} (@pxref{Temp- and
compilation-buffers}).

Maybe you want also change the look&feel of the tree-buffers. Then you
can change the location of the collapse- and expand-symbols and the
indendation of sub-nodes in a tree. See @code{ecb-tree-indent} and
@code{ecb-tree-expand-symbol-before}.

@node Redrawing the ECB-layout, Hiding/Showing the ECB windows, Changing the ECB-layout, Usage of ECB
@section Redrawing the ECB-layout

@cindex redraw
If you have unintenionally destroyed the ECB-layout, you can always
restore the layout with calling @code{ecb-redraw-layout}. This is even
true, if you get messages like ``wrong-type-argument window-live-p
#<window 222>''.

If the variable @code{ecb-redraw-layout-quickly} is not nil then the redraw
is done by the @code{ecb-redraw-layout-quickly} function, otherwise by
@code{ecb-redraw-layout-full}. But it's strongly recommended to use the
quick redraw only if you have really slow machines where a full redraw
takes several seconds because the quick redraw is not really safe and
may have some drawbacks! On normal machines the full redraw should be
done in << 1s!


@node Hiding/Showing the ECB windows, Interactive ECB commands, Redrawing the ECB-layout, Usage of ECB
@section Hiding/Showing the ECB windows

@cindex Hide windows
@cindex Show windows
With @code{ecb-toggle-ecb-windows} you can hide/show all the ECB windows
without changing the activation state of ECB and also without
deactivating the advices for @code{delete-other-windows} and/or
@code{delete-window}. This is most useful if you use a layout like nr.10
(@pxref{Tips and tricks}) or if you want to have maximum space for
editing and you don't need the browsing windows all the time.

@node Interactive ECB commands, , Hiding/Showing the ECB windows, Usage of ECB
@section Interactive ECB commands

@defun ecb-minor-mode &optional arg
Toggle ECB minor mode. With prefix argument @var{ARG}, turn on if
positive, otherwise off. Return non-@code{nil} if the minor mode is
enabled.
@end defun

@defun ecb-activate
Activates the ECB and creates all the buffers and draws the ECB-screen
with the actually choosen layout (see @code{ecb-layout-nr}). This function
raises always the ECB-frame if called from another frame. This is the
same as calling @code{ecb-minor-mode} with a positive argument.
@end defun

@defun ecb-deactivate
Deactivates the ECB and kills all ECB buffers and windows.
@end defun

@defun ecb-update-directories-buffer
Updates the ECB directories buffer.
@end defun

@defun ecb-current-buffer-sync &optional force
Synchronizes the ECB buffers with the current buffer. Unless
@var{FORCE} is non-@code{nil} then do this only if current-buffer
differs from the source displayed in the ECB tree-buffers.
@end defun

@defun ecb-rebuild-methods-buffer
Updates the methods buffer with the current buffer after deleting the
complete previous parser-information, means no semantic-cache is used!
Point must stay in an edit-window otherwise nothing is done. This
method is merely needed if semantic parses not the whole buffer
because it reaches a not parsable code. Examples when a call to this
function is necessary:
If an elisp-file is parsed which contains in the middle a defun X
where the closing ) is missing then semantic parses only until this
defun X is reached and you will get an incomplete ECB-method buffer.
In such a case you must complete the defun X and then call this
function to completely reparse the elisp-file and rebuild the ECB
method buffer!
If you change only the name of a method or a variable and you want
the new name be shown immediately in the ECB-method buffer then you
must call this function.
@end defun

@defun ecb-redraw-layout
Redraw the ECB screen. If the variable @code{ecb-redraw-layout-quickly} is
not nil then the redraw is done by the @code{ecb-redraw-layout-quickly}
function, otherwise by @code{ecb-redraw-layout-full}. But it's strongly
recommended to use the quick redraw only if you have really slow
machines where a full redraw takes several seconds because the quick
redraw is not really safe and may have some drawbacks! On normal
machines the full drawback should be done in << 1s!
@end defun

@defun ecb-clear-history &optional clearall
Clears the ECB history-buffer. If @var{CLEARALL} is @code{nil} then
the behavior is defined in the option @code{ecb-clear-history-behavior}
otherwise the value of @var{CLEARALL} overrides the value of this
option:
@itemize @minus
@item < 0: Means not-existing-buffers
@item > 0: Means existing-buffers
@item = 0: Means all
@end itemize
For further explanation see @code{ecb-clear-history-behavior}.
@end defun

@defun ecb-add-all-buffers-to-history
Add all current file-buffers to the history-buffer of ECB.
@end defun

@defun ecb-show-help &optional format
Shows the online help of ECB either in Info or in HTML format
depending of the value of @code{ecb-show-help-format}. If called with
prefix argument, i.e. if @var{FORMAT} is not nil then the user is prompted
to choose the format of the help (Info or HTML).
@end defun

@defun ecb-submit-problem-report
Submit a problem report for the ECB to the ECB mailing-list. This
command generates in the edit-window a problem-report which contains
already the current values of all ECB options, the current
backtrace-buffer if there is any and the current message-buffer. You
will be asked for a problem-report subject and then you must insert a
description of the problem. Please describe the problem as detailed as
possible!
@end defun

@defun ecb-goto-window-directories
@end defun

@defun ecb-goto-window-sources
@end defun

@defun ecb-goto-window-methods
@end defun

@defun ecb-goto-window-history
@end defun

@defun ecb-toggle-ecb-windows &optional arg
Toggle visibilty of the ECB-windows. With prefix argument @var{ARG},
make visible if positive, otherwise invisible. This has nothing to do
with (de)activating ECB but only affects the visibility of the ECB
windows. ECB minor mode remains active!
@end defun

@defun ecb-toggle-layout
Toggles between the layouts defined in @code{ecb-toggle-layout-sequence}.
Note: This function works by changing the options @code{ecb-layout-nr} and
@code{ecb-show-sources-in-directories-buffer} but only for current
Emacs-session.
@end defun

@defun ecb-toggle-enlarged-compilation-window &optional arg
Toggle whether the @code{ecb-compile-window} is enlarged or not. If
@var{ARG} > 0 then enlarge to a sensefull value (see below), if
@var{ARG} <= 0 then shrink @code{ecb-compile-window} to
@code{ecb-compile-window-height} and if @var{ARG} is nil then toggle the
enlarge-state.

The @code{ecb-compile-window} is enlarged to the following value: At least
to the value of @code{ecb-compile-window-height} and max. to half of the
frame-height of the ECB-frame, best depending on the values of
@code{compilation-window-height} (before ECB was started!) and the number
of lines of current buffer in @code{ecb-compile-window}. If
@code{compilation-window-height} is set before ECB was started then ECB
never enlarges the @code{ecb-compile-window} over the value of
@code{compilation-window-height}! Changing this option during activated ECB
takes first effect after restarting ECB!
@end defun

@defun ecb-cycle-switch-to-compilation-buffer
Switch to the given compilation buffer in the compilation window.
@end defun

@defun ecb-cycle-through-compilation-buffers
Cycle through all compilation buffers currently open and display them
within the compilation window @code{ecb-compile-window}. If the currently
opened buffer within the compilation window is not a compilation
buffer, we jump to the first compilation buffer. If not we try to loop
through all compilation buffers. If we hit the end we go back to the
beginning. See @code{ecb-compilation-buffer-p}.
@end defun

@defun ecb-upgrade-options
Check for all ECB-options if their current value is compatible to the
defined type. If not upgrade it to the new type or reset it to the
default-value of current ECB. Try also to upgrade renamed options.
Displays all upgraded or reset options with their old (before the
upgrade/reset) and new values.
@end defun

@defun ecb-display-upgraded-options
Display a message-buffer which options have been upgraded or reset.
@end defun

@defun ecb-download-ecb
Download ECB from the ECB-website and install it. For this the utilities
``wget'', ``tar'' and ``gzip'' are needed which are available for unix and
also for windows with cygwin. All utilities must reside in your PATH!

If you are behind a firewall and you have to use a proxy you maybe
need the following wget-configuration in your file @file{~/.wgetrc}:

@example
# Define your proxies (where 8080 and 8081 are examples
# for the portnumbers)
http_proxy = http://your.proxy.com:8080
ftp_proxy  = http://your.ftpproxy.com:8081
  
# If you do not want to use proxy at all, set this to off.
use_proxy = on
@end example

ECB will try to download the following url:
``<ecb-download-url>ecb-<ecb-download-version>.tar.gz''. For this the
options @code{ecb-download-url} and @code{ecb-download-version} must be set
correct, whereas the default value of the former one should always be
correct.

After sucessfull downloading the new ECB will be installed in a
directory parallel to current ECB-directory. After adding this new
directory tp @code{load-path} and restarting Emacs the new ECB version can
be activated by @code{ecb-activate}.
@end defun


Most of these functions are also available via the menu ``ECB'' and
also via the ECB keymap with prefix @kbd{C-c .} (see
@code{ecb-minor-mode} for a complete list of the keybindings).

@node Customizing, Submitting problem report, Usage of ECB, Top
@chapter Customizing ECB

@noindent
All customization of ECB is divided into the following customize
groups:

@itemize @bullet
@item ecb-general: General customization of ECB
@item ecb-directories: Customization of the ECB-directories buffer.
@item ecb-sources: Customization of the ECB-sources buffer.
@item ecb-methods: Customization of the ECB-methods buffer.
@item ecb-history: Customization of the ECB-history buffer.
@item ecb-layout: Customization of the layout of ECB.
@item ecb-faces: All faces used by ECB to highlight nodes and some other stuff.
@item ecb-download: Options for downloading another ECB version from within ECB.
@end itemize

You can highly customize all the ECB behavior/layout so just go to
this groups and you will see all well documented ECB-options. The
easiest access for this customize groups is via the menu ``ECB''.

Here are the most important options (it is recommended to check the following
options before working with ECB):

@vtable @code
@item ecb-source-path
Where ECB can find your sources. You must set this option!
@item ecb-show-help-format
Should the online help of ECB be displayed in the standard Info format
or in HTML format in a web-browser.
@item  ecb-auto-activate
@itemx ecb-major-modes-activate
@itemx ecb-major-modes-deactivate
Auto. (de)activation of ECB
@item ecb-key-map
All ECB-keybindings incl. a common prefixkey (@pxref{Working with the
keyboard}).
@item ecb-new-ecb-frame
Should ECB create a new frame at activation time.
@item  ecb-primary-secondary-mouse-buttons
@itemx ecb-primary-mouse-jump-destination
Define how to use the mouse (@pxref{Working with the mouse}).
@item  ecb-tree-expand-symbol-before
@itemx ecb-tree-indent
The look&feel of the trees. Maybe you like a value of 4 for the
latter one if you display the expand-symbol before (@pxref{Changing the
ECB-layout}).
@item ecb-source-file-regexps
Which files will (not) be shown in ECB.
@item ecb-show-node-info-in-minibuffer
When and which node-info should be displayed in the minibuffer?
@item ecb-layout-nr
The ECB layout, means which windows you want to be displayed in the
ECB-frame and also the location of these windows (@pxref{Changing the
ECB-layout}).
@item  ecb-token-display-function
@itemx ecb-type-token-display
How to display the entries in the ECB-method window.
@end vtable

But especially all the options in the customize groups 'ecb-layout',
'ecb-methods' and 'ecb-face-options' are also worth to be checked.

@node Submitting problem report, Upgrading, Customizing, Top
@chapter Submitting a problem report

@cindex Bug report
@cindex Problem report
If you run into problems with ECB you can/should send a problem report
to the ECB mailing list @email{ecb-list@@lists.sourceforge.net}. ECB
offers you a command which does all necessary for you to send a
problem report. Just call @code{ecb-submit-problem-report}! Please read the
documentation of this command, @xref{Interactive ECB commands}.

This command creates a problem-report buffer for you. After that you
get a menu ``Mail'' (dependend on the mail-package used, the menu can
have a different name) with commands to send the problem report. But
for this the varibale @code{mail-user-agent} must be configured right for
your system. If you can앖 get working this mechanism you can simply
copy the whole problem-report buffer after filling it out and sending
it with your standard mail-client to
@email{ecb-list@@lists.sourceforge.net}!

Please read also the documentation of the option @code{ecb-debug-mode} and
switch on the debug mode of ECB (also available in the Help-menu of
ECB!) before submitting a problem-report!

@node Upgrading, Tips and tricks, Submitting problem report, Top
@chapter Upgrading ECB

@cindex Upgrade
@cindex Download
ECB offers the possibility to upgrade to newer versions direct from
the ECB-website. This can be done with @code{ecb-download-ecb} if the tools
wget, tar and gzip are installed onto the system and a connection to
the web is available. Please read the documentation of
@code{ecb-download-ecb} and the options of the customize-group
'ecb-download'!

@node Tips and tricks, Elisp programming, Upgrading, Top
@chapter Tips and tricks

@menu
* Changing faces::              Changing faces in the ECB tree-buffers
* Small screens::               Working with small screens
* Simulating speedbar::         Simulating speedbar without an extra frame
* Optimze scrolling::           Optimze scrolling in the edit-window
* Large directories::           Working with large directories
@end menu

@node Changing faces, Small screens, Tips and tricks, Tips and tricks
@section Changing faces in the ECB tree-buffers

@cindex Faces
There are two basic faces:

@itemize @bullet
@item @code{ecb-default-general-face}:
Basic face for displaying an ECB-tree-buffer.
@item @code{ecb-default-highlight-face}:
Basic face for highlighting the current node in an ECB-tree-buffer.
@end itemize

With this faces you can change the basic attributes easily and fast
for ALL ECB-tree-buffers. But you are also able to display each
ECB-tree-buffer with different faces. For further details see the
doc-strings of the faces @code{ecb-default-general-face} and
@code{ecb-default-highlight-face} (just call @code{customize-face} to see the
doc-strings). The options of the group 'ecb-face-options' are also
interesting.


@node Small screens, Simulating speedbar, Changing faces, Tips and tricks
@section Working with small screens

@cindex Small screen
If your screen is very small so you need every sqare-centimeter for
displaying the buffer which you want to edit, ECB offers you a special
layouts, where only the ECB-methods buffer is displayed on top or on
left-side. Here comes what you should/can do to work best with ECB in
such a situation:

@itemize @bullet
@item First customize your ECB:

@enumerate
@item
Customize @code{ecb-layout-nr} to layout nr. 10 (on top) or nr. 11 (on left-side)
@item
Ensure that @code{ecb-compile-window-height} is nil.
@item
Optional: Ajust the @code{ecb-windows-height} resp. @code{ecb-windows-width}.
@item
Save your changes.
@end enumerate

@item To edit your buffers:
Call @code{ecb-toggle-ecb-windows} (also available via the menu ``ECB'' and
by @kbd{C-c . w}) or @code{ecb-hide-ecb-windows} to hide the ECB-method buffer
so you get all the place of your screen for editing.

@item To browse and select functions:
Call @code{ecb-toggle-ecb-windows} or @code{ecb-show-ecb-windows} to
make the ECB-method buffer visible if not already. If you want select
a method/variable with the keyboard instead with the mouse you should
read the section @ref{Working with the keyboard} in this online help!
@end itemize

The possibility of hiding temporally the ECB windows like described
above is also useful for all the other layouts.


@node Simulating speedbar, Optimze scrolling, Small screens, Tips and tricks
@section Simulating speedbar without an extra frame

@cindex Speedbar
You can simulate a speedbar-like layout within ONE frame by doing the
following:

@enumerate
@item
Customize @code{ecb-layout-nr} to layout nr. 11, 14, 15 or 16 dependend to
what you like.
@item
Optional: Ensure that @code{ecb-compile-window-height} is nil.
@item
Optional: Ajust the @code{ecb-windows-width}.
@item
Optional: Customize @code{ecb-toggle-layout-sequence} and toggle very fast
between several layouts by @code{ecb-toggle-layout}. See the doc-strings!
@item
Optional: Customize @code{ecb-show-sources-in-directories-buffer} to not
nil if the choosen layout (see 1. and 4.) contains a
directories-tree-buffer.
@item
Save your changes.
@end enumerate


@node Optimze scrolling, Large directories, Simulating speedbar, Tips and tricks
@section Optimze scrolling in the edit-window

@cindex Scrolling
Emacs 20.X seems to slow down scrolling if there is a horizontal split
in the frame and/or a lot of overlays in the buffer which is scrolled.
This is independend of ECB! But because almost all layouts of ECB uses
horizontal splits of the frame and because ECB is based on semantic
which uses overlays intensively there can be poor scrolling
performance in large buffers, especially with java-buffers in
@code{jde-mode}.

This scrolling performance can be increased a lot if the options
@code{scroll-conservatively} and @code{scroll-step} are set appropriatelly: The
former one should have a value of 0 during ECB is active and the
latter one a value of either 0 or > 1 (the exact value depends on the
power of your machine).

As far as we know this is not a problem of Emacs 21.X or XEmacs. With
these versions of Emacs there should be no scrolling problem even with
@code{scroll-step} has value 1.


@node Large directories, , Optimze scrolling, Tips and tricks
@section Working with large directories

If @code{ecb-source-path} contains directories with many files and subdirs,
especially if these directories are mounted net-drives (``many'' means
here something > 1000, dependend on the speed of the net-connection
and the machine), actualizing the sources- and/or directories- buffer
of ECB (if displayed in current layout!) can slow down dramatically.
If this is a problem the contents of certain directories can be cached
which increases the speed a lot. See @code{ecb-cache-directory-contents}.


@node Elisp programming, Conflicts, Tips and tricks, Top
@chapter Entry points for elisp programmers

Variables an elisp-program can use:

@itemize @bullet
@item @code{ecb-source-path-functions}
@end itemize

Available hooks:

@cindex Hooks
@itemize @bullet
@item @code{ecb-activate-before-new-frame-created-hook}
@item @code{ecb-activate-before-layout-draw-hook}
@item @code{ecb-activate-hook}
@item @code{ecb-deactivate-hook}
@item @code{ecb-current-buffer-sync-hook}
@end itemize

Look at the documentation of these variables and hooks to get description.

Remark to the library tree-buffer: This library is ECB independent and
can be used for other applications too. But such an application is not
allowed to use any of the variables of tree-buffer.el especially not
the following:

@code{tree-buffers}: Only for internal use. It contains all
tree-buffers of current Emacs-instance, means all tree-buffers of all
applications which uses currently tree-buffers. Every application must
store its own tree-buffers in an own variable! For example: ECB stores
its tree-buffers in @code{ecb-tree-buffers}!

An application can only use the methods tree-buffer.el provides!


@node Conflicts, Function Index, Elisp programming, Top
@chapter Known conflicts with other packages

Here is a list of known conflicts of ECB with other packages and
helpful solutions/hints/workarounds:

@menu
* VC::
* follow-mouse::
* avoid::
* calendar::
* calculator::
@end menu

@node VC, follow-mouse, Conflicts, Conflicts
@section Package VC (Version Control)

@cindex VC package
@cindex Version control
The variable @code{vc-delete-logbuf-window} must be set to nil during
active ECB. This can be done with the hooks mentioned above.

@node follow-mouse, avoid, VC, Conflicts
@section Package follow-mouse.el

@cindex follow-mouse package
ECB works very well with follow-mouse if follow-mouse is turned on
BEFORE ECB is activated (e.g. within the @code{ecb-activate-hook}). But if
you activate follow-mouse first after ECB is already activated, then
the follow-mouse stuff prevents the complete node-name to be displayed
in the echo-area if mouse moves over it. Because ECB has a much more
intelligent mouse tracking mechanism than follow-mouse the
follow-mouse stuff profit from ECB and works even better and saver as
without activated ECB!


@node avoid, calendar, follow-mouse, Conflicts
@section Package avoid.el

@cindex avoid package
With GNU Emacs 20.X ECB must deactivate @code{mouse-avoidance-mode} if the
option @code{ecb-show-node-info-in-minibuffer} activates for at least one
ECB tree-buffer 'if-too-long or 'always. This is done automatically
but only as long ECB is activated.


@node calendar, calculator, avoid, Conflicts
@section Package calendar.el

@cindex calendar package
With activated ECB @code{calendar} does not shrink it압 window to the small
size but splits the window equally. But if you add this to your
@file{.emacs} it works:

@example
(add-hook 'initial-calendar-window-hook
          (function (lambda ()
                      (when (and ecb-minor-mode (ecb-point-in-edit-window))
                        (or (= (frame-width) (window-width))
                            (shrink-window (- (window-height) 9)))))))
@end example

@node calculator, , calendar, Conflicts
@section Package calculator.el

@cindex calculator package
If the edit-window is already splitted then calling @code{calculator} uses
the whole ``other'' edit-window for the calculator. With an unsplitted
edit-window the calculator window has it압 normal size of about 2
lines. Therefore it압 recommended to set @code{calculator-electric-mode}
during ECB activation to not nil so calculator uses always the
echo-area instead of creating a new small window!

@node Function Index, Variable Index, Conflicts, Top
@unnumbered Function Index

@printindex fn

@node Variable Index, Concept Index, Function Index, Top
@unnumbered Variable Index

This index contains only the most important options of ECB!

@printindex vr

@node Concept Index, , Variable Index, Top
@unnumbered Concept Index

@printindex cp

@bye
